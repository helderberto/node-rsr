{"version":3,"file":"rsr.umd.js","sources":["../src/index.js"],"sourcesContent":["'use strict';\n\nclass Rsr {\n\n  static save(model, options) {\n    const { data, error, validate } = options;\n    const errorValidate = Rsr.setAlert('save', validate);\n    const errorSave = Rsr.setAlert('save', error);\n\n    Rsr.isValid(data, errorValidate);\n\n    return model.create(data)\n      .then((response) => {\n        Rsr.handleError(response, errorSave);\n        return response;\n      })\n      .catch((err) => {\n        console.error(err.message);\n        return err;\n      });\n  }\n\n  static delete(model, options) {\n    const { params, error, validate } = options;\n\n    Rsr.isValid(params.id);\n\n    return model.destroy({\n      where: params\n    })\n      .then((response) => {\n        Rsr.handleError(response, error);\n        return response;\n      })\n      .catch((err) => {\n        console.error(err.message);\n        return err;\n      });\n  }\n\n  static update(model, options) {\n    const { params, error, validate, data } = options;\n\n    Rsr.isValid(options.params, validate);\n\n    return model.update(data, {\n      where: params\n    })\n      .then((response) => {\n        Rsr.handleError(response, error);\n        return response;\n      })\n      .catch(err => {\n        console.error(err.message);\n        return err;\n      });\n  }\n\n  static findAll(model, options) {\n    const { error, params } = options;\n    const errorFind = Rsr.setAlert('find', error);\n\n    return model.findAll(params)\n      .then((response) => {\n        Rsr.handleError(response, errorFind);\n        return response;\n      })\n      .catch(err => {\n        console.error(err.message);\n        return err;\n      });\n  }\n\n  static findOne(model, options) {\n    const { error, params, validate } = options;\n    const errorValidate = Rsr.setAlert('save', validate);\n    const errorFind = Rsr.setAlert('find', error);\n\n    return model.findOne(params)\n      .then((response) => {\n        Rsr.handleError(response, errorFind);\n        return response;\n      })\n      .catch(err => {\n        console.error(err.message);\n        return err;\n      });\n  }\n\n  static isValid(data, message = '') {\n    const errorEmpty = Rsr.setAlert('empty', message);\n\n    if (!data) {\n      throw new Error(errorEmpty);\n      return;\n    }\n    return true;\n  }\n\n  static setAlert(type, message) {\n    const defaultAlert = {\n      validate: 'Verifique se os campos foram preenchidos corretamente.',\n      empty: 'Os campos devem ser preenchidos.',\n      delete: 'Não foi possível remover o cadastro.',\n      update: 'Não foi possível atualizar o cadastro',\n      save: 'Não foi possível efetuar o cadastro',\n      find: 'Sua consulta não retornou resultados.',\n    };\n\n    if (message) {\n      const alert = {};\n      alert[type] = message;\n      return alert[type];\n    }\n    return defaultAlert[type];\n  }\n\n  static handleError(response, error) {\n    if (!response) {\n      throw new Error(error);\n      return;\n    }\n    return true;\n  }\n\n}\n\nmodule.exports = Rsr;\n"],"names":["Rsr","save","model","options","data","error","errorValidate","setAlert","errorSave","isValid","create","then","response","handleError","catch","err","message","delete","params","id","destroy","update","findAll","errorFind","findOne","errorEmpty","Error","type","alert","module","exports"],"mappings":"0IAEA,IAAMA,iBAEGC,cAAKC,EAAOC,OACTC,SAAMC,UACRC,EAAgBN,EAAIO,SAAS,mBAC7BC,EAAYR,EAAIO,SAAS,OAAQF,YAEnCI,QAAQL,EAAME,GAEXJ,EAAMQ,OAAON,GACjBO,cAAMC,YACDC,YAAYD,EAAUJ,GACnBI,IAERE,eAAOC,kBACEV,MAAMU,EAAIC,SACXD,OAINE,gBAAOf,EAAOC,OACXe,WAAQb,mBAEZI,QAAQS,EAAOC,IAEZjB,EAAMkB,eACJF,IAENP,cAAMC,YACDC,YAAYD,EAAUP,GACnBO,IAERE,eAAOC,kBACEV,MAAMU,EAAIC,SACXD,OAINM,gBAAOnB,EAAOC,OACXe,WAAQb,UAAiBD,kBAE7BK,QAAQN,EAAQe,mBAEbhB,EAAMmB,OAAOjB,SACXc,IAENP,cAAMC,YACDC,YAAYD,EAAUP,GACnBO,IAERE,eAAMC,kBACGV,MAAMU,EAAIC,SACXD,OAINO,iBAAQpB,EAAOC,OACLe,WACTK,EAAYvB,EAAIO,SAAS,uBAExBL,EAAMoB,QAAQJ,GAClBP,cAAMC,YACDC,YAAYD,EAAUW,GACnBX,IAERE,eAAMC,kBACGV,MAAMU,EAAIC,SACXD,OAINS,iBAAQtB,EAAOC,OACZE,UAAOa,WAETK,GADgBvB,EAAIO,SAAS,mBACjBP,EAAIO,SAAS,OAAQF,WAEhCH,EAAMsB,QAAQN,GAClBP,cAAMC,YACDC,YAAYD,EAAUW,GACnBX,IAERE,eAAMC,kBACGV,MAAMU,EAAIC,SACXD,OAINN,iBAAQL,EAAMY,kBAAU,QACvBS,EAAazB,EAAIO,SAAS,QAASS,OAEpCZ,QACG,IAAIsB,MAAMD,UAGX,KAGFlB,kBAASoB,EAAMX,MAUhBA,EAAS,KACLY,cACAD,GAAQX,EACPY,EAAMD,mBAXH,+DACH,0CACC,8CACA,6CACF,2CACA,yCAQYA,MAGfd,qBAAYD,EAAUP,OACtBO,QACG,IAAIc,MAAMrB,UAGX,GAKXwB,OAAOC,QAAU9B"}